(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3627],{8900:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(67294),r=a(73973),s=a(35629),l=a(85893),i=function(e){var t=e.id,a=e.name,i=e.value,o=e.type,u=e.required,c=e.autoFocus,d=void 0!==c&&c,m=e.onKeyUp,v=e.disabled,h=e.onBlur,g=e.onChange,f=e.label,p=e.toolTipText,x=e.list,b=(0,n.useRef)(null),j=function(e){null===h||void 0===h||h(e)};return(0,n.useEffect)((function(){d&&b.current.focus()}),[]),(0,l.jsxs)("div",{className:"relative w-full bg-gray-600 rounded floating-input text-grey",children:[(0,l.jsx)("input",{ref:d?b:null,className:"form-input",id:t,placeholder:" ",name:a,value:i,type:o,required:u,onBlur:function(e){return j(e)},onKeyUp:m,onChange:g,disabled:v,autoFocus:d,list:x}),(0,l.jsx)("label",{htmlFor:a,children:f}),p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex absolute top-0 right-0 cursor-pointer",children:[(0,l.jsx)("span",{className:"self-stretch bg-grey-600 my-3 box-border w-px"}),(0,l.jsx)(s.Z,{content:(0,l.jsx)("p",{className:"p-2 text-grey-900 font-400 w-96",children:p}),showOnHover:!0,placement:"bottom-center",children:(0,l.jsx)(r.Z,{size:18,className:"cursor-pointer text-grey-600 my-4 mr-3 ml-2"})})]})," "]})]})},o=function(e){var t=e.helpTextTop,a=e.id,n=e.label,r=e.name,s=e.type,o=e.value,u=e.required,c=e.onChange,d=e.onKeyUp,m=e.onBlur,v=e.autoFocus,h=e.disabled,g=e.helpText,f=e.errorText,p=e.errorList,x=e.toolTipText,b=e.list;return(0,l.jsxs)("div",{className:"flex flex-col space-y-1",children:[t&&(0,l.jsx)("div",{className:"text-grey text-sm font-400",children:t}),(0,l.jsx)(i,{id:a,label:n,name:r,type:s,value:o,required:u,onChange:c,onKeyUp:d,onBlur:m,autoFocus:v,disabled:h,toolTipText:x,list:b}),g&&(0,l.jsx)("div",{className:"text-grey text-sm font-400",children:g}),f&&(0,l.jsx)("div",{className:"text-red-200 text-sm font-400",children:f}),p&&p.map((function(e,t){return(0,l.jsx)("div",{"data-testid":"input-error",className:"text-red-200 text-sm font-400",children:e},t)}))]})};o.defaultProps={type:"text",label:"",helpTextTop:"",helpText:"",errorText:"",errorList:[],required:!1,disabled:!1};var u=o},37129:function(e,t,a){"use strict";var n=a(80318),r=a(30266),s=a(809),l=a.n(s),i=a(81292),o=a(85492),u=a(43532),c=a(92876),d=a(94184),m=a.n(d),v=a(67294),h=a(58808),g=a.n(h),f=a(7883),p=a.n(f),x=a(19302),b=a(85893),j=function(e){return(0,b.jsx)("div",{className:"px-3 py-2 cursor-pointer text-grey",children:null===e||void 0===e?void 0:e.title})};t.Z=function(e){var t=e.setSchoolName,a=e.setSchoolId,s=e.schoolName,d=e.errorText,h=e.handleOnBlur,f=(0,v.useState)([]),y=f[0],C=f[1],N=(0,v.useState)(!1),S=N[0],_=N[1],w=function(){var e=(0,r.Z)(l().mark((function e(t){var a,n,r,s,d,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.trim().length,n=o.Eh.MIN_LENGTH,r=o.Eh.MAX_LENGTH,!(a<n||a>r)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,s="/api/v1/schools/?q=".concat(t),e.next=8,(0,i.CClient)(s);case 8:if((d=e.sent).ok){e.next=15;break}return e.t0=Error,e.next=13,(0,u.getAPIErrorString)(d,s);case 13:throw e.t1=e.sent,new e.t0(e.t1);case 15:return e.next=17,d.json();case 17:m=e.sent,C(m),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(4),(0,c.Tb)(e.t2);case 24:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t){return e.apply(this,arguments)}}(),k=(0,x.Z)((function(e){var t=e.value;return w(t)}),300),T=(0,n.Z)(k,1)[0],E={value:s,onChange:function(e,n){var r=n.newValue;y.length||a(null),t(r)},name:"school",id:"school",type:"text",required:!0,onKeyDown:function(e){return function(e){8===e.keyCode&&a(null)}(e)},onFocus:function(){return _(!0)},onBlur:function(){""===s&&_(!1),h&&h()}};return(0,v.useEffect)((function(){s&&_(!0)}),[s]),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g(),{theme:p(),suggestions:y,onSuggestionsFetchRequested:T,onSuggestionsClearRequested:function(){return C([])},renderSuggestion:j,getSuggestionValue:function(e){return e.title},onSuggestionSelected:function(e,n){var r=n.suggestion;a(r.id),t(r.title)},inputProps:E}),(0,b.jsx)("label",{htmlFor:"school",className:m()("absolute top-0 left-0 flex cursor-text items-center","p-2 px-4 transition-all duration-200 ease-in-out","mt-1 select-none",{"text-xs text-grey-800 pointer-events-none mt-auto":S}),children:"School name"}),d&&(0,b.jsx)("div",{className:"mt-1 text-sm text-red-200 font-400",children:d})]})}},33627:function(e,t,a){"use strict";a.r(t);var n=a(92809),r=a(30266),s=a(809),l=a.n(s),i=a(38198),o=a(23634),u=a(8056),c=a(81292),d=a(8900),m=a(16375),v=a(11031),h=a(36580),g=a(63332),f=a(31960),p=a(14184),x=a(59028),b=a(72262),j=a(4597),y=a(19889),C=a(11163),N=a(67294),S=a(78268),_=a(37129),w=a(12571),k=a(48966),T=a.n(k),E=a(85893);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.default=function(e){var t=e.isOpen,a=e.setIsOpen,s=e.setNudgeForStudentDetails,k=e.startTime,P=e.isMinimal,G=e.studentDetailsProp,O=e.isInClassroom,Z=void 0!==O&&O,M=e.updateStudentInfoState,I=e.preventReloadOnDetailsUpdate,L=void 0!==I&&I,A=e.isJoinTrialClassPage,F=(0,f.T)(),H=F.id,B=F.student,U=F.teacher,q=F.name,z=F.gender,K=F.email,R=F.phone,V=F.voucher,Y=F.city,J=F.timezone,X=F.country,$=F.dob,Q=F.school,W=U?G:B,ee=U?null===G||void 0===G?void 0:G.name:q,te=U?null===G||void 0===G?void 0:G.gender:z,ae=U?null===G||void 0===G?void 0:G.email:K,ne=U?null===G||void 0===G?void 0:G.phone:R,re=V,se=U?null===G||void 0===G?void 0:G.city:Y,le=U?null===G||void 0===G?void 0:G.dob:$,ie=U?G.userId:H,oe=U?null===G||void 0===G?void 0:G.school:Q,ue=(0,N.useState)(J),ce=ue[0],de=ue[1],me=(0,N.useState)({}),ve=me[0],he=me[1],ge=(0,N.useState)(!1),fe=ge[0],pe=ge[1],xe=(0,N.useState)("Student"===ee?"":ee),be=xe[0],je=xe[1],ye=(0,N.useState)((0,j.UU)(te)),Ce=ye[0],Ne=ye[1],Se=(0,N.useState)(re),_e=Se[0],we=Se[1],ke=(0,N.useState)(se),Te=ke[0],Ee=ke[1],Pe=(0,N.useState)(null===W||void 0===W?void 0:W.parentName),De=Pe[0],Ge=Pe[1],Oe=(0,N.useState)(null===W||void 0===W?void 0:W.grade),Ze=Oe[0],Me=Oe[1],Ie=(0,N.useState)(le),Le=Ie[0],Ae=Ie[1],Fe=(0,N.useState)(null),He=Fe[0],Be=Fe[1],Ue=(0,N.useState)(""),qe=Ue[0],ze=Ue[1],Ke=(0,N.useState)((0,j.uE)(ae,ne)),Re=Ke[0],Ve=Ke[1],Ye=function(){var e=(0,r.Z)(l().mark((function e(){var t,a,r,s,i,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=D({},(0,g.validateSchoolData)(qe)),!Object.keys(o).length){e.next=5;break}return he(o),pe(!1),e.abrupt("return");case 5:u={name:be,gender:A?null:Ce.value,email:Re,voucher:_e,city:Te,student:{grade:Ze,parentName:De,id:W.id},dob:Le},null===(t=window)||void 0===t||null===(a=t.gtag)||void 0===a||a.call(t,"set","user_data",(r={},(0,n.Z)(r,"email",null===u||void 0===u?void 0:u.email),(0,n.Z)(r,"address.first_name",null===u||void 0===u?void 0:u.name),(0,n.Z)(r,"phone_number",ne),(0,n.Z)(r,"address.country",X),r)),null===(s=window)||void 0===s||null===(i=s.gtag)||void 0===i||i.call(s,"event","conversion",(0,n.Z)({},"send_to","".concat(p.u,"/oHtACMLkoPMCEISk_psC"))),Je(u),(0,c.updateUserSchool)(ie,He,qe);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=(0,r.Z)(l().mark((function e(t){var n,r,i,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="/api/v1/users/".concat(U?W.userId:"me","/"),!fe){e.next=3;break}return e.abrupt("return");case 3:if(pe(!0),null!==W&&void 0!==W&&W.id){e.next=6;break}throw new Error("Student ID can not be null");case 6:if(r=(0,g.validateStudentDetailsData)(t,A),!Object.keys(r).length){e.next=11;break}return he(r),pe(!1),e.abrupt("return");case 11:return e.prev=11,e.next=14,(0,c.CClient)(n,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 14:if(!(i=e.sent).ok){e.next=28;break}if(a(!1),pe(!1),he({}),s&&s(!1),!M){e.next=25;break}return e.next=23,i.json();case 23:u=e.sent,M(u);case 25:y.Z.success("".concat(U?o.ag._({id:"trialClass.studentDetailsModal.successful.teacher",message:"Student's details have been saved successfully."}):o.ag._({id:"trialClass.studentDetailsModal.successful.student",message:"Your personal details have been saved successfully."}))).then((function(){return!L&&C.default.reload()})),e.next=33;break;case 28:return e.next=30,i.json();case 30:d=e.sent,pe(!1),he(d);case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(11),console.error(e.t0);case 38:case"end":return e.stop()}}),e,null,[[11,35]])})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,r.Z)(l().mark((function e(t){var a,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="/api/v1/users/".concat(U?W.userId:"me","/"),null!==W&&void 0!==W&&W.id){e.next=3;break}throw new Error("Student ID can not be null");case 3:return e.prev=3,e.next=6,(0,c.CClient)(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 6:if((n=e.sent).ok){e.next=12;break}return e.next=10,n.json();case 10:r=e.sent,console.error(r);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,g.validateSchoolData)(qe),!Object.keys(t).length){e.next=3;break}return e.abrupt("return");case 3:(0,c.updateUserSchool)(ie,He,qe);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.useEffect)((function(){ce||de(x.S2)}),[]),(0,N.useEffect)((function(){U&&(je("Student"===ee?"":ee),Ne((0,j.UU)(te)),Ve((0,j.uE)(ae,ne)),we("Coupon code"===_e?"":_e),Ee("City"===Te?"":Te),Ge("Parent Name"===De?"":De))}),[G]),(0,N.useEffect)((function(){oe&&(Be(null===oe||void 0===oe?void 0:oe.id),ze(null===oe||void 0===oe?void 0:oe.title))}),[]),(0,E.jsx)(v.Z,{isOpen:t,width:"max-w-xl",setIsOpen:a,children:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"flex justify-end relative",children:(0,E.jsx)("button",{className:"focus:outline-none absolute",onClick:function(){return a(!1)},children:(0,E.jsx)(S.Z,{className:"stroke-1 text-grey-800"})})}),(0,E.jsxs)("div",{className:"px-5 overflow-auto",children:[U&&(0,E.jsx)("h2",{className:"font-600",children:(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.heading.teacher"})}),P&&!U&&(0,E.jsx)("h2",{className:"font-600 text-xl",children:(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.heading.student.minimal"})}),!P&&!U&&Z&&(0,E.jsxs)("div",{className:"flex flex-col space-y-5 leading-tight",children:[(0,E.jsx)("h2",{className:"text-2xl font-600",children:(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.heading.student"})}),(0,E.jsx)("p",{children:(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.subHeading.student"})}),(0,E.jsx)("p",{className:"font-600",children:(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.subHeading.student.2"})})]}),A&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"text-center flex justify-center mb-4",children:(0,E.jsx)("img",{className:"h-auto w-32",src:"/images/trial-class/join/student-details-cover-image.png",alt:"cover image student modal"})}),(0,E.jsx)("p",{className:"text-grey text-xl lg:text-2xl font-500 leading-tight mb-2 text-center",children:(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.classBookingTime",values:{0:(0,x.pZ)(k,ce,"h:mm A [Z] on ddd, MMM DD")},components:{0:(0,E.jsx)("br",{}),1:(0,E.jsx)("span",{className:"font-600"})}})}),(0,E.jsx)("p",{className:"lg:text-lg leading-tight my-4 font-600",children:(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.subHeading.student.3"})})]}),(0,E.jsx)("div",{className:"mt-4",children:(0,E.jsx)(d.Z,{label:o.ag._({id:"trialClass.studentDetailsModal.fieldLabels.name",message:"Name"}),id:"name",name:"name",value:be,onChange:function(e){var t=e.currentTarget.value;je(t)},onBlur:function(){return Xe({name:be})},required:!0,errorText:ve.name,autoFocus:!0})}),(0,E.jsx)("div",{className:"mt-4",children:(0,E.jsx)(_.Z,{setSchoolName:ze,setSchoolId:Be,schoolName:qe,errorText:ve.school,handleOnBlur:function(){return $e()}})}),(0,E.jsx)("div",{className:"mt-4",children:(0,E.jsx)(d.Z,{label:o.ag._({id:"trialClass.studentDetailsModal.fieldLabels.email",message:"Email"}),id:"email",name:"email",type:"email",value:Re,onChange:function(e){var t=e.currentTarget.value;Ve(t)},onBlur:function(){return function(e){T().isEmail(e)&&Xe({email:e})}(Re)},errorText:ve.email,required:!0})}),!A&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"mt-4",children:(0,E.jsx)(m.default,{id:"childGrade",placeholder:"Grade",value:{value:Ze,label:(0,b.ZN)(Ze)},handleSelectChange:function(e,t){Me(t.value),Xe({grade:t.value})},isSearchable:!1,isInModal:!0,options:w.L,errorText:ve.grade,required:!0})}),(0,E.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,E.jsx)("span",{className:"text-grey mr-5",children:"Date of Birth: "}),(0,E.jsx)(d.Z,{id:"birthday",name:"birthday",type:"date",value:Le,onChange:function(e){var t=e.currentTarget.value;Ae(t)}})]})]}),(0,E.jsx)("div",{className:"mt-4",children:(0,E.jsx)(d.Z,{label:o.ag._({id:"trialClass.studentDetailsModal.fieldLabels.city",message:"City"}),id:"city",name:"city",value:Te,onChange:function(e){var t=e.currentTarget.value;Ee(t)},onBlur:function(){return Xe({city:Te})},errorText:ve.city})}),!A&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"mt-4",children:(0,E.jsx)(d.Z,{label:o.ag._({id:"trialClass.studentDetailsModal.fieldLabels.parentName",message:"Parent Name"}),id:"parentName",name:"parentName",value:De,onChange:function(e){var t=e.currentTarget.value;Ge(t)},onBlur:function(){return Xe({parentName:De})},errorText:ve.parentName})}),(0,E.jsx)("div",{className:"mt-4",children:(0,E.jsx)(m.default,{id:"childGender",placeholder:"Select",value:{value:Ce.value,label:(0,b.ZN)(Ce.label)},handleSelectChange:function(e,t){Ne(t),Xe({gender:t.value})},isSearchable:!1,isInModal:!0,options:u.P3,errorText:ve.gender,required:!0})})]}),(0,E.jsx)("div",{className:"flex mt-5 mb-5",children:(0,E.jsx)("button",{onClick:Ye,className:"btn btn-orange font-400",disabled:fe,children:fe?(0,E.jsx)(h.Z,{classes:"text-white h-5 w-5"}):A?(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.saveCTA"}):(0,E.jsx)(i.cC,{id:"trialClass.studentDetailsModal.updateCTA"})})})]})]})})}},63332:function(e,t,a){"use strict";a.r(t),a.d(t,{validateTrialBookingFormData:function(){return o},validateCompetitionRegistrationFormData:function(){return u},validateStudentDetailsData:function(){return c},validateSchoolData:function(){return d},validateProfileData:function(){return m}});var n=a(23634),r=a(48966),s=a.n(r),l=a(14312),i=a(85492),o=function(e){var t={};s().isEmail(e.email)||(t.email=[n.ag._("Please enter a valid email")]),s().isEmpty(e.name)&&(t.name=[n.ag._("Please enter your name")]);var a=(0,l.a$)(e.phone);return Object.keys(a).length&&(t.phone=a.phone),e.termsAndConditions||(t.termsAndConditions=[n.ag._("Please accept terms and conditions to proceed")]),"select"===e.childGrade.value&&(t.childGrade=[n.ag._("Please select student grade")]),"select"===e.childGender.value&&(t.childGender=[n.ag._("Please select student gender")]),null===e.hasLaptop&&(t.hasLaptop=[n.ag._("Please add a response here")]),t},u=function(e){var t={};s().isEmpty(e.name)&&(t.name=[n.ag._("Please enter your name")]),s().isEmpty(e.email)||s().isEmail(e.email)||(t.email=[n.ag._("Please enter a valid email")]);var a=(0,l.a$)(e.phone);return Object.keys(a).length&&(t.phone=a.phone),e.termsAndConditions||(t.termsAndConditions=[n.ag._("Please accept terms and conditions to proceed")]),"select"===e.childGrade.value&&(t.childGrade=[n.ag._("Please select student grade")]),null===e.hasLaptop&&(t.hasLaptop=[n.ag._("Please add a response here")]),t},c=function(e,t){var a={};return s().isEmail(e.email)||(a.email=[n.ag._("Please enter a valid email")]),s().isEmpty(e.name)&&(a.name=[n.ag._("Please enter your name")]),t||"select"===e.gender&&(a.gender=[n.ag._("Please select student gender")]),a},d=function(e){var t={},a=i.Eh.MIN_LENGTH,r=i.Eh.MAX_LENGTH;return s().isEmpty(e)&&(t.school=[n.ag._("Please add a school name")]),(null===e||void 0===e?void 0:e.trim().length)<a&&(t.school=[n.ag._("Please select a school with minimum 3 characters")]),(null===e||void 0===e?void 0:e.trim().length)>r&&(t.school=[n.ag._("Please select a school with maximum 255 characters")]),t},m=function(e){var t,a={};return e.name&&s().isEmpty(e.name)&&(a.name=[n.ag._("Please enter your name")]),"select"===(null===(t=e.student)||void 0===t?void 0:t.grade)&&(a.childGrade=[n.ag._("Please select student grade")]),a}},12571:function(e,t,a){"use strict";a.d(t,{L:function(){return n}});var n=[{value:"Kindergarten",label:{id:"Kindergarten"}},{value:"Grade 1",label:{id:"Grade 1"}},{value:"Grade 2",label:{id:"Grade 2"}},{value:"Grade 3",label:{id:"Grade 3"}},{value:"Grade 4",label:{id:"Grade 4"}},{value:"Grade 5",label:{id:"Grade 5"}},{value:"Grade 6",label:{id:"Grade 6"}},{value:"Grade 7",label:{id:"Grade 7"}},{value:"Grade 8",label:{id:"Grade 8"}},{value:"Grade 9",label:{id:"Grade 9"}},{value:"Grade 10",label:{id:"Grade 10"}},{value:"Grade 11",label:{id:"Grade 11"}},{value:"Grade 12",label:{id:"Grade 12"}},{value:"Undergraduate",label:{id:"12th Pass"}}]},4597:function(e,t,a){"use strict";a.d(t,{lr:function(){return v},uE:function(){return h},UU:function(){return g}});var n=a(30266),r=a(809),s=a.n(r),l=a(23634),i=a(8056),o=a(81292),u=a(59028),c=15,d=21,m=function(e){var t=e.slots,a=e.selectedTimezone,n=e.rangeStartHour,r=void 0===n?c:n,s=e.rangeEndHour,l=void 0===s?d:s;if(!t||0===(null===t||void 0===t?void 0:t.length))return null;var i=null===t||void 0===t?void 0:t.filter((function(e){var t=(0,u.ZP)(e).tz(a).hour();return t>=r&&t<=l-1}));if(0===(null===i||void 0===i?void 0:i.length))return null;var o=Math.floor(Math.random()*((null===i||void 0===i?void 0:i.length)-1));return null===i||void 0===i?void 0:i[o]},v=function(){var e=(0,n.Z)(s().mark((function e(t){var a,n,r,c,d,v,h,g,f,p,x,b,j,y,C,N,S,_;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setIsLoading,n=t.studentId,r=t.selectedTimezone,c=t.course,d=t.teacherUuid,v=t.setSelectedDate,h=t.setAvailableSlots,g=t.setError,f=void 0===g?null:g,p=t.setSelectedTime,x=void 0===p?void 0:p,a(!0),b="/api/v1/calendars/trial/slots/?studentId=".concat(n,"&tz=").concat(r,"&course=").concat(c),d&&(b+="&tid=".concat(d)),e.prev=4,e.next=7,(0,o.CClient)(b);case 7:if(!(j=e.sent).ok){e.next=21;break}return e.next=11,j.json();case 11:y=e.sent,C={},0===y.length&&(0,o.trackPageVisit)(i.HU.NO_SLOT_AVAILABLE,c),y.forEach((function(e){var t=(0,u.ZP)(e.start).tz(r).format("DD-MM-YYYY");C.hasOwnProperty(t)||(C[t]=[]),C[t].push((0,u.ZP)(e.start).tz(r).format())})),v(Object.keys(C)[0]),null===x||void 0===x||x(m({slots:Object.values(C)[0],selectedTimezone:r})),h(C),a(!1),e.next=28;break;case 21:if(403!==j.status&&404!==j.status){e.next=27;break}return e.next=24,j.json();case 24:throw N=e.sent,S=(0,o.flattenErrorsDictValues)(N),new Error(S.join("\n"));case 27:throw new Error;case 28:e.next=35;break;case 30:e.prev=30,e.t0=e.catch(4),a(!1),_=e.t0.message?e.t0.message:l.ag._({id:"trialClass.booking.getAvailableSlotsErrorMessage",message:"There was an error getting available slots for a trial class. Please try again later or contact support to get help with booking the class."}),f?f(_):(0,o.showErrorAlert)({text:_});case 35:case"end":return e.stop()}}),e,null,[[4,30]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){return e==="".concat(null===t||void 0===t?void 0:t.substr(1),"@codingal-student.com")?"":e},g=function(e){return{value:e||"select",label:e||{id:"dropdown.gender.selectGender",message:"Select gender"}}}},7883:function(e){e.exports={container:"react-autosuggest_container__1rI-r",input:"react-autosuggest_input__27SZI",suggestionsContainer:"react-autosuggest_suggestionsContainer__SC16F",suggestion:"react-autosuggest_suggestion__NBEnH",suggestionHighlighted:"react-autosuggest_suggestionHighlighted__RZSeV"}}}]);
//# sourceMappingURL=3627-e847699c9b77f12bef27.js.map