"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7767],{97767:function(e,t,s){s.d(t,{Z:function(){return v}});var n=s(38198),a=s(8056),i=s(81292),l=s(42951),o=s(17820),r=s(36580),c=s(84666),d=s(24546),x=s(71455),m={coding:{id:"trialClass.booking.courseHeading.coding",message:"Book a free lesson to enter the magical world of coding"},competition:{id:"trialClass.booking.courseHeading.competition",message:"Book a free lesson to win coding competitions & prizes"},robotics:{id:"trialClass.booking.courseHeading.robotics",message:"Book a free lesson to get started with the magical world of robotics"},algorithms:{id:"trialClass.booking.courseHeading.algorithms",message:"Book a free lesson to get started with Data Structures & Algorithms"},mathtrialclass:{id:"Book a free lesson to explore the magical world of Math"}},g=s(59028),u=s(94184),h=s.n(u),f=s(11163),b=s(67294),p=s(23634),j=s(11031),C=s(58405),k=s(85893),v=function(e){var t,s,u=e.slots,v=e.selectedDate,N=e.setSelectedDate,w=e.selectedTime,y=e.setSelectedTime,z=e.onBook,M=e.isBooking,T=e.findInstantClass,Z=e.selectedTimezone,S=e.setSelectedTimezone,O=e.title,B=e.timezoneAlertBgColor,I=void 0===B?"blue":B,_=e.showLimitedSlotsAlert,A=void 0!==_&&_,D=e.showBookingStats,E=void 0!==D&&D,P=e.ctaText,Y=void 0===P?p.ag._({id:"trialClass.booking.ctaText",message:"Book now"}):P,L=e.onGoBack,H=e.error,F=void 0===H?"":H,G=e.segmentTrackingEvents,R=e.isInteachertrialClassroom,K=e.studentName,q=e.studentEmail,J=e.studentGrade,U=e.isCompetitionRegistration,W=e.isCodingProject,Q=e.isMathClass,V=(0,x.ZP)(),X=(0,b.useState)([]),$=X[0],ee=X[1],te=(0,b.useState)(!1),se=te[0],ne=te[1],ae=(0,f.useRouter)().query.course,ie=(0,b.useState)(!1),le=ie[0],oe=ie[1],re="string"===typeof ae?ae.replace(/-/g,""):"",ce=(0,d.Z)().sizes.sm;return(0,b.useEffect)((function(){ee(u[v])}),[v]),(0,k.jsxs)("div",{"data-testid":"available-slots",className:"flex flex-col",children:[O?(0,k.jsx)("h4",{className:"text-xl leading-tight text-grey font-700",children:O}):(0,k.jsx)(k.Fragment,{children:T===a.EJ.FAIL?(0,k.jsxs)("div",{className:"text-3xl text-grey font-600",children:[(0,k.jsx)("div",{children:"Sorry! No live teachers available now."}),(0,k.jsx)("div",{children:"Please book a convenient slot"})]}):(0,k.jsxs)(k.Fragment,{children:[!U&&!W&&(0,k.jsx)("h4",{className:"text-3xl leading-tight text-grey font-600",children:(0,k.jsx)(o.Z,{msg:ae?m["".concat(re)]:m.coding})}),W&&(0,k.jsx)("h4",{className:"text-xl md:text-3xl leading-tight text-grey font-600",children:(0,k.jsx)(n.cC,{id:"Schedule a free mentorship session with a Computer Science expert"})}),U&&(0,k.jsx)("h4",{className:"text-xl md:text-3xl leading-tight text-grey font-600",children:(0,k.jsx)(n.cC,{id:"Schedule a free mentorship session with a Computer Science expert & kickstart your competition preparation"})})]})}),!R&&(0,k.jsxs)("p",{className:h()("text-sm my-3 px-2 py-1 border-l-4",{"bg-blue-50 border-blue-200":"blue"===I,"bg-yellow-100 border-yellow-200":"yellow"===I}),children:[(0,k.jsx)(n.cC,{id:"trialClass.booking.timezoneInfoMsg"})," ",Z," (GMT ",(0,g.ZP)().tz(Z).format("Z"),")."," ",(0,k.jsx)(n.cC,{id:"Your current time is"})," ",(0,g.ZP)().tz(Z).format("hh:mm A"),"."," ",(0,k.jsx)("button",{className:"underline cursor-pointer hover:text-orange focus:outline-none",onClick:function(){return ne(!0)},children:(0,k.jsx)(n.cC,{id:"trialClass.booking.changeTimezoneBtn"})})]}),R&&(0,k.jsxs)("div",{className:"flex flex-col mt-2 bg-grey-200 rounded p-5 py-3",children:[(0,k.jsxs)("p",{children:["Name: ",(0,k.jsx)("span",{className:"font-600 text-orange",children:K})]}),(0,k.jsxs)("p",{children:["Email: ",(0,k.jsx)("span",{className:"font-600 text-orange",children:q})]}),(0,k.jsxs)("p",{children:["Grade: ",(0,k.jsx)("span",{className:"font-600 text-orange",children:J})]})]}),(0,k.jsxs)("div",{className:"flex flex-col mt-3",children:[(0,k.jsx)("span",{className:"font-600 text-grey",children:(0,k.jsx)(n.cC,{id:"trialClass.booking.selectDate"})}),(0,k.jsx)("div",{className:"grid grid-cols-2 mt-2 lg:grid-cols-3 gap-x-3 gap-y-3",children:null===(t=Object.keys)||void 0===t||null===(s=t.call(Object,u))||void 0===s?void 0:s.map((function(e){return(0,k.jsx)("button",{type:"button",onClick:function(){(null===G||void 0===G?void 0:G.clickDate)&&V(null===G||void 0===G?void 0:G.clickDate),N(e),y(null)},"data-testid":e,className:"font-600 focus:outline-none border border-grey-500 rounded-lg py-2 px-2 lg:px-4 hover:border-blue-200 text-sm lg:text-base ".concat(v===e?"bg-blue-200 text-white":"text-grey"),children:p.ag.date((0,g.ZP)(e,"DD-MM-YYYY").toDate(),{day:"2-digit",month:"short",weekday:"short"})},e)}))}),(0,k.jsxs)("span",{className:"mt-5 text-grey font-600",children:[(0,k.jsx)(n.cC,{id:"trialClass.booking.selectTime"})," (",Z,")"]}),(0,k.jsx)("div",{className:"flex flex-wrap mt-2 overflow-auto lg:grid-cols-5 thin-scroll-bar",style:{maxHeight:"".concat(ce?246.75:162.5,"px")},children:$.map((function(e){return(0,k.jsx)("div",{className:"flex",children:(0,k.jsx)("button",{type:"button","data-testid":"time-slot-button",onClick:function(){y(e),(null===G||void 0===G?void 0:G.clickTime)&&V(G.clickTime)},className:"font-600 focus:outline-none border border-grey-500 w-32 rounded-lg mr-2 mb-2 py-2 px-2 lg:px-4 text-sm lg:text-base hover:border-blue-200 ".concat(w===e?"bg-blue-200 text-white":"bg-white"),children:(0,g.pZ)((0,g.ZP)(e).toDate(),Z,"hh:mm A")})},e)}))})]}),F&&(0,k.jsx)(l.Z,{className:"self-start",children:F}),A&&v===(0,g.ZP)().tz(Z).format("DD-MM-YYYY")&&$.length<=10&&(0,k.jsx)(l.Z,{type:"info",className:"self-start",children:(0,k.jsx)(n.cC,{id:"trialClass.booking.onlyOneSlotLeftAlert",values:{0:$.length,1:$.length>1?"slots":"slot"}})}),(0,k.jsxs)("div",{className:"flex items-center mt-3 space-x-5",children:[(0,k.jsx)("button",{className:"btn btn-orange py-3 flex justify-center rounded-lg ".concat(M?"cursor-not-allowed opacity-50":"cursor-pointer"),"data-testid":"book-trial-class-btn",onClick:function(){oe(!0),V(x.R2.TRIAL_CLASS_BOOKING_FLOW_CLICK_BOOK_NOW)},disabled:M,children:M?(0,k.jsx)(r.Z,{classes:"h-5 w-5 text-white"}):Y}),L&&(0,k.jsx)("button",{className:"hover:underline font-600 focus:outline-none",onClick:L,children:(0,k.jsx)(n.cC,{id:"trialClass.booking.goBack"})})]}),(0,k.jsx)(l.Z,{type:"warning",className:"self-start bg-yellow-100 mt-4 lgLmt-6",children:(0,k.jsx)("span",{className:"text-grey",children:Q?(0,k.jsx)(n.cC,{id:"trialClass.booking.warningMessage.math"}):(0,k.jsx)(n.cC,{id:"trialClass.booking.warningMessage"})})}),E&&(0,k.jsxs)("div",{className:"flex items-center mt-5 space-x-3 mb-3",children:[(0,k.jsx)("div",{className:"p-3 rounded-full bg-red-50",children:(0,k.jsx)("img",{src:(0,i.staticFile)("/images/trial-class/check-mark-calendar.svg"),className:"w-10 lg:w-4"})}),(0,k.jsx)("p",{className:"max-w-lg text-sm leading-tight text-red-200",children:Q?(0,k.jsx)(n.cC,{id:"trialClass.booking.hurryUpMsg.math"}):(0,k.jsx)(n.cC,{id:"trialClass.booking.hurryUpMsg"})})]}),(0,k.jsx)(c.default,{isOpen:se,setIsOpen:ne,selectedTimezone:Z,setSelectedTimezone:S}),(0,k.jsx)(j.Z,{isOpen:le,setIsOpen:oe,shouldCloseOnEsc:!0,children:(0,k.jsxs)("div",{className:"text-lg font-500 space-y-2",children:[(0,k.jsx)("p",{className:"text-xl md:text-xl mb-5 text-center",children:Q?(0,k.jsx)(n.cC,{id:"trialClass.booking.confirmationMsg.math"}):(0,k.jsx)(n.cC,{id:"trialClass.booking.confirmationMsg.coding"})}),(0,k.jsx)(l.Z,{type:"warning",className:"bg-yellow-100",children:(0,k.jsx)("span",{className:"text-grey",children:Q?(0,k.jsx)(n.cC,{id:"trialClass.booking.modal.warningMessage.math"}):(0,k.jsx)(n.cC,{id:"trialClass.booking.modal.warningMessage.coding"})})}),(0,k.jsxs)("div",{className:"pt-4 pb-2 space-y-3 text-base md:text-xl",children:[(0,k.jsx)(C.Z,{className:"w-full",onClick:function(){z(),oe(!1)},children:(0,k.jsx)(n.cC,{id:"Yes, I will attend"})}),(0,k.jsx)(C.Z,{variant:"outline",className:"w-full",onClick:function(){oe(!1)},children:(0,k.jsx)(n.cC,{id:"No, I want to change date/time"})})]}),F&&(0,k.jsx)("div",{className:"text-sm leading-4 text-red-200 font-400",children:F})]})})]})}},84666:function(e,t,s){s.r(t);var n=s(30266),a=s(809),i=s.n(a),l=s(38198),o=s(23634),r=s(81292),c=s(16375),d=s(11031),x=s(36580),m=s(92876),g=s(94184),u=s.n(g),h=s(22091),f=s(59028),b=s(67294),p=s(11163),j=s(19889),C=s(78268),k=s(85893);t.default=function(e){var t=e.isOpen,s=e.setIsOpen,a=e.selectedTimezone,g=e.setSelectedTimezone,v=e.isReload,N=void 0!==v&&v,w=(0,b.useState)(a),y=w[0],z=w[1],M=(0,b.useState)(!1),T=M[0],Z=M[1],S=function(){var e=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,(0,r.CClient)("/api/v1/users/me/",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:y})});case 4:if(!(t=e.sent).ok){e.next=9;break}N&&j.Z.success(o.ag._({id:"trialClass.booking.timezoneModal.successMessage",message:"Timezone has been updated successfully."})).then((function(){return p.default.reload()})),e.next=10;break;case 9:throw new Error(t.statusText);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),m.Tb(e.t0),(0,r.showErrorAlert)({text:o.ag._({id:"trialClass.booking.timezoneModal.errorMessage",message:"Something went wrong while updating your timezone preferences."})});case 16:Z(!1),g(y),s(!1);case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),O=(0,b.useMemo)((function(){return Object.values(h.default.getAllTimezones()).sort((function(e,t){return e.dstOffset-t.dstOffset})).map((function(e){return{label:"(GMT ".concat(e.dstOffsetStr,") ").concat(e.name),value:e.name}}))}),[]);return(0,k.jsx)(d.Z,{isOpen:t,setIsOpen:s,children:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"flex justify-end",children:(0,k.jsx)(C.Z,{className:"cursor-pointer w-5 text-grey-800",onClick:function(){return s(!1)}})}),(0,k.jsxs)("div",{className:"flex flex-col mx-5 mb-5 lg:mx-0 lg:mb-0 space-y-2",children:[(0,k.jsx)("p",{className:"text-2xl font-600",children:(0,k.jsx)(l.cC,{id:"trialClass.booking.timezoneModal.heading"})}),(0,k.jsx)("p",{className:"leading-tight text-grey",children:(0,k.jsx)(l.cC,{id:"trialClass.booking.timezoneModal.subHeading",values:{0:(0,f.ZP)().tz(a).format("Z"),selectedTimezone:a}})}),(0,k.jsx)(c.default,{options:O,id:"timezone-dropdown",handleSelectChange:function(e,t){return z(t.value)},value:O.find((function(e){return e.value===y})),required:!0,isInModal:!0}),(0,k.jsxs)("div",{className:"flex pt-2 space-x-5",children:[(0,k.jsx)("button",{className:u()("btn btn-orange",{"cursor-not-allowed":T}),disabled:T,onClick:S,children:T?(0,k.jsx)(x.Z,{classes:"w-5"}):(0,k.jsx)(l.cC,{id:"trialClass.booking.timezoneModal.ctaText"})}),(0,k.jsx)("button",{className:u()("text-orange font-600 hover:underline",{"cursor-not-allowed":T}),disabled:T,onClick:function(){return s(!1)},children:(0,k.jsx)(l.cC,{id:"trialClass.booking.timezoneModal.cancelBtnText"})})]})]})]})})}}}]);
//# sourceMappingURL=7767-1c065189a558a0207b04.js.map