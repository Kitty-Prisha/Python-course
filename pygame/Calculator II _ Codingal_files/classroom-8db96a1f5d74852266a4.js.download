(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6597],{42951:function(e,t,n){"use strict";var s=n(92809),r=n(10219),a=n(48140),o=n(94184),i=n.n(o),l=(n(67294),n(85893)),c=["children","className","type","icon"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={danger:"border-red-200 bg-red-50 text-red-200",info:"border-blue-200 bg-blue-50 text-blue-200",warning:"border-yellow-200 bg-yellow-50 text-yellow-200",success:"border-green-200 bg-green-50 text-green-200"};t.Z=function(e){var t=e.children,n=e.className,s=e.type,o=void 0===s?"danger":s,d=e.icon,f=(0,r.Z)(e,c);return(0,l.jsxs)("p",u(u({className:i()("flex items-center my-1 border-l-4 text-sm  pl-1 pr-5 py-1 font-500",h[o],n)},f),{},{children:[d?"string"===typeof d?(0,l.jsx)(a.J,{className:"mr-1",name:d,size:16}):d:null,(0,l.jsx)("span",{className:"ml-1",children:t})]}))}},1567:function(e,t,n){"use strict";var s=n(92809),r=n(10219),a=n(94184),o=n.n(a),i=n(67294),l=n(17820),c=n(85893),d=["badges","onClick","className","enableScroll","badgeWidth","children","badgeHoverBgClass","isOnDashboard","rewardedBadgesData"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=(0,i.forwardRef)((function(e,t){var n,a,i,u,f,m,x=e.badges,p=e.onClick,g=e.className,v=e.enableScroll,b=e.badgeWidth,j=void 0===b?1.2:b,C=e.children,w=e.badgeHoverBgClass,S=e.isOnDashboard,y=e.rewardedBadgesData,E=(0,r.Z)(e,d);return(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsxs)("section",h(h({ref:t,className:o()("p-2 space-x-4",v&&"overflow-x-scroll scrolling-auto",g)},E),{},{children:[(null===x||void 0===x?void 0:x.filter((function(e){return"coding"===e.subject})).length)>0&&(0,c.jsx)("h2",{className:"text-lg font-500 mt-2 pl-4 text-grey",children:"Coding Badges"}),(0,c.jsx)("div",{className:"flex ".concat(v?"flex-no-wrap":"flex-wrap"),children:null===x||void 0===x||null===(n=x.filter((function(e){return"coding"===e.subject})))||void 0===n||null===(a=n.sort((function(e,t){var n=e.titleText||"",s=t.titleText||"";return n.localeCompare(s)})))||void 0===a||null===(i=a.map)||void 0===i?void 0:i.call(a,(function(e){var t,n;return(0,c.jsxs)("div",{onClick:function(){return null===p||void 0===p?void 0:p(e)},className:o()("items-center py-3 rounded-lg space-y-2 relative w-24 flex-shrink-0 flex flex-col",(0,s.Z)({},"cursor-pointer ".concat(w||"hover:bg-orange-200"),!!p)),children:[e.image&&(0,c.jsx)("img",{src:"https://codingal.s3.ap-south-1.amazonaws.com/web".concat(e.image),height:50*j,width:(e.width||47.62)*j}),S&&(null===y||void 0===y?void 0:y[e.id])&&(null===y||void 0===y||null===(t=y[e.id])||void 0===t?void 0:t.noOfBadges)>1&&(0,c.jsxs)("span",{className:"absolute font-600 text-sm text-white bg-green-200 rounded-full w-8 text-center py-1",style:{top:"40px",right:"10px"},children:["+",(null===y||void 0===y||null===(n=y[e.id])||void 0===n?void 0:n.noOfBadges)-1]}),(0,c.jsx)("p",{className:"leading-tight text-center text-grey text-sm",children:(0,c.jsx)(l.Z,{msg:e.title})})]},e.id)}))}),(0,c.jsxs)(c.Fragment,{children:[(null===x||void 0===x?void 0:x.filter((function(e){return"math"===e.subject})).length)>0&&(0,c.jsx)("h2",{className:"text-lg font-500 mt-2 text-grey",children:"Math Badges"}),(0,c.jsx)("div",{className:"flex",children:null===x||void 0===x||null===(u=x.filter((function(e){return"math"===e.subject})))||void 0===u||null===(f=u.sort((function(e,t){var n=e.titleText||"",s=t.titleText||"";return n.localeCompare(s)})))||void 0===f||null===(m=f.map)||void 0===m?void 0:m.call(f,(function(e){var t,n;return(0,c.jsxs)("div",{onClick:function(){return null===p||void 0===p?void 0:p(e)},className:o()("flex-shrink-0 flex flex-col items-center py-3 rounded-lg space-y-2 relative w-24",(0,s.Z)({},"cursor-pointer ".concat(w||"hover:bg-orange-200"),!!p)),children:[e.image&&(0,c.jsx)("img",{src:"https://codingal.s3.ap-south-1.amazonaws.com/web".concat(e.image),height:50*j,width:(e.width||47.62)*j}),S&&(null===y||void 0===y?void 0:y[e.id])&&(null===y||void 0===y||null===(t=y[e.id])||void 0===t?void 0:t.noOfBadges)>1&&(0,c.jsxs)("span",{className:"absolute font-600 text-sm text-white bg-green-200 rounded-full w-8 text-center py-1",style:{top:"36px",right:"25px"},children:["+",(null===y||void 0===y||null===(n=y[e.id])||void 0===n?void 0:n.noOfBadges)-1]}),(0,c.jsx)("p",{className:"leading-tight text-center text-grey text-sm",children:(0,c.jsx)(l.Z,{msg:e.title})})]},e.id)}))})]}),C]}))})}));t.Z=f},59839:function(e,t,n){"use strict";var s=n(83789),r=n(30266),a=n(809),o=n.n(a),i=n(38198),l=n(23634),c=n(67294),d=n(19889),u=n(46737),h=n.n(u),f=n(11163),m=n(92876),x=n(81292),p=n(96509),g=n(48482),v=n(11031),b=n(90250),j=n(36580),C=n(43532),w=n(35629),S=n(40259),y=n(94184),E=n.n(y),O=n(78268),N=n(84501),I=n(73973),T=n(72262),A=n(42951),k=n(85893);t.Z=function(e){var t=e.isOpen,n=e.setIsOpen,a=e.classroomId,u=e.isTrial,y=e.studentTrackingDetails,_=e.students,M=(0,f.useRouter)(),Z=(0,c.useState)(null),P=Z[0],D=Z[1],R=(0,c.useState)(null),F=R[0],B=R[1],H=(0,c.useState)(null),L=H[0],G=H[1],U=(0,c.useState)(null),W=U[0],q=U[1],J=(0,c.useState)(null),z=J[0],K=J[1],Y=(0,c.useState)(""),X=Y[0],V=Y[1],Q=(0,c.useState)(!1),$=Q[0],ee=Q[1],te=(0,c.useState)(_),ne=te[0],se=te[1],re=(0,c.useState)([]),ae=re[0],oe=re[1],ie=(0,c.useState)(!1),le=ie[0],ce=ie[1],de=(0,c.useState)(!1),ue=de[0],he=de[1];(0,c.useEffect)((function(){a&&D(a)}),[a]),(0,c.useEffect)((function(){void 0!==u&&B(u),!u&&ce(!0)}),[u]),(0,c.useEffect)((function(){y&&G(y)}),[y]),(0,c.useEffect)((function(){_&&se(_)}),[_]),(0,c.useEffect)((function(){K(null),W!==p.q7.CLASS_FINISHED&&oe([])}),[W]),(0,c.useEffect)((function(){X&&V("")}),[z]);var fe=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,s,r,a,i,c,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=W,W!==p.q7.UNSPECIFIED&&z!==p.q7.CLASS_FINISHED_ON_ZOOM&&z!==p.q7.CLASS_FINISHED_ON_GMEET&&z!==p.q7.CLASS_FINISHED_ON_MOBILE||(t=z),n=""===X.trim()&&t===p.q7.CLASS_FINISHED?"":X,t!==p.q7.CLASS_FINISHED||0!==ae.length){e.next=6;break}return d.Z.error("Please select all students who attended the class."),e.abrupt("return");case 6:if(u||W!==p.q7.CLASS_FINISHED||ue){e.next=9;break}return d.Z.error("Please share the learning outcome in the whatsapp group & confirm it."),e.abrupt("return");case 9:if((0,g.uy)(t,n,ae)){e.next=11;break}return e.abrupt("return");case 11:return s=JSON.stringify({endReason:t,endReasonOther:n,studentsAttended:ae}),e.prev=12,ee(!0),r="/api/v1/classrooms/".concat(P,"/"),e.next=17,(0,x.CClient)(r,{method:"PATCH",headers:{"Content-Type":"application/json"},body:s});case 17:if(!(a=e.sent).ok){e.next=30;break}return e.next=21,a.json();case 21:return i=e.sent,c=i.endReason,f="/feedback/teacher/course-class/".concat(P),"/dashboard/",F&&(f=(0,g.ts)(c)?"/teacher/dashboard/track-class-completion/?userId=".concat(L.userId,"&phone=").concat(L.phone,"&utmSource=").concat(L.utmSource,"&classroomId=").concat(P):"/feedback/teacher/trial-class/".concat(P)),d.Z.success(l.ag._({id:"trialClass.classroom.endClassModal.successful",message:"Class successfully ended, redirecting to the next page."})),e.abrupt("return",F?M.push(f):M.push("/dashboard/"));case 30:if(401!==a.status){e.next=36;break}ee(!1),h()({icon:"error",title:l.ag._({id:"trialClass.classroom.endClassModal.errorModal.heading",message:"Sorry!"}),text:l.ag._({id:"trialClass.classroom.endClassModal.errorModal.text",message:"There was an error ending this class. Could you please log out, log in and try again?"})}),m.uT(a.statusText),e.next=41;break;case 36:return e.t0=Error,e.next=39,(0,C.getAPIErrorString)(a,r,s);case 39:throw e.t1=e.sent,new e.t0(e.t1);case 41:e.next=48;break;case 43:e.prev=43,e.t2=e.catch(12),ee(!1),h()({icon:"error",title:l.ag._({id:"trialClass.classroom.endClassModal.errorModal.heading",message:"Sorry!"}),text:l.ag._({id:"trialClass.classroom.endClassModal.errorModal.text.2",message:"There was an error ending this class. Could you please try again?"})}),m.Tb(e.t2);case 48:case"end":return e.stop()}}),e,null,[[12,43]])})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)(v.Z,{isOpen:t,setIsOpen:n,children:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"flex justify-end absolute top-0 right-0",children:(0,k.jsx)("button",{className:"focus:outline-none p-3",onClick:function(){n(!1),u&&ce(!1)},children:(0,k.jsx)(O.Z,{color:"#666",className:"stroke-1"})})}),u&&!le&&(0,k.jsxs)("div",{className:"flex flex-col mb-5 transition-all duration-1000 ease-linear transform",children:[(0,k.jsxs)(A.Z,{type:"warning",className:"bg-yellow-100 bg-opacity-50",children:[(0,k.jsx)(N.Z,{className:"mt-1 w-12 h-12 text-orange-400 mx-auto"}),(0,k.jsx)("p",{className:"text-grey",children:(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.alertMsg",components:{0:(0,k.jsx)("br",{})}})})]}),(0,k.jsxs)("div",{className:"flex items-center mt-5",children:[(0,k.jsx)("button",{className:"btn btn-orange font-400",onClick:function(){return n(!1)},children:(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.endClassLater.cta"})}),(0,k.jsx)("button",{onClick:function(){return ce(!0)},className:"ml-4 text-grey-800 focus:outline-none hover:text-orange font-600",children:$?(0,k.jsx)(j.Z,{classes:"text-white h-5 w-5"}):(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.endClassNow.cta"})})]})]}),le&&(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:"flex flex-col px-10 mt-5 mb-10 transition-all duration-1000 ease-linear transform",children:[(0,k.jsx)("h2",{className:"text-2xl font-600 text-grey",children:(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.heading"})}),(0,k.jsx)("div",{className:"flex flex-col mt-3 transition-all duration-500 transform",children:S.hf.map((function(e){var t=e.key,n=e.value,s=e.title,r=e.reasons;return(0,k.jsxs)("div",{children:[(0,k.jsx)(b.Z,{id:t,name:t,label:(0,T.ZN)(s),checked:W===n,isRound:!0,containerClasses:"pt-4",handleCheckboxChange:function(){return q(n===W?null:n)}}),(0,k.jsx)("div",{className:"pl-5 transition-all ease-in-out duration-500 overflow-hidden ".concat(W===n&&r?"max-h-screen opacity-100":"max-h-0 opacity-0"),children:null===r||void 0===r?void 0:r.map((function(e){var t=e.title,n=e.key,s=e.value;return(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsx)(b.Z,{id:n,name:n,label:(0,T.ZN)(t),checked:z===s,isRound:!0,isSmall:!0,containerClasses:"pt-3",handleCheckboxChange:function(){return K(s===z?null:s)}}),(0,k.jsx)("textarea",{className:"form-textarea w-full resize-none text-grey-800 placeholder-grey-800 text-sm transition-all ease-in-out duration-500 overflow-hidden ".concat(z===s?"h-24 opacity-100 mt-2":"h-0 opacity-0 p-0"),placeholder:"Please provide more details",value:X,onChange:function(e){return V(e.target.value)}})]},n)}))})]},t)}))}),(0,k.jsx)("div",{className:E()("border text-grey-500 bg-grey-500 transition-all ease-in-out duration-500",{"opacity-0 mt-0":W!==p.q7.CLASS_FINISHED,"mt-3 ":W===p.q7.CLASS_FINISHED})}),(0,k.jsxs)("div",{className:E()("flex flex-col mt-3 transition-all ease-in-out duration-500 overflow-hidden",{"max-h-screen opacity-100":W===p.q7.CLASS_FINISHED,"max-h-0 opacity-0":W!==p.q7.CLASS_FINISHED}),children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("h3",{className:"text-lg font-600 text-grey leading-tight",children:(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.attendance.heading"})}),(0,k.jsx)(w.Z,{content:(0,k.jsx)("p",{className:"max-w-sm",children:(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.attendance.toolTip"})}),showOnHover:!0,children:(0,k.jsx)(I.Z,{className:"w-5 cursor-pointer text-grey-700"})})]}),(0,k.jsx)("div",{className:"flex flex-col mt-3 overflow-y-auto",children:null===ne||void 0===ne?void 0:ne.map((function(e){var t=e.id,n=e.name,r=e.phone;return(0,k.jsx)(b.Z,{handleCheckboxChange:function(){return function(e){var t,n=null===ae||void 0===ae?void 0:ae.includes(e),r=(0,s.Z)(ae);r=n?null===(t=r)||void 0===t?void 0:t.filter((function(t){return t!=e})):[].concat((0,s.Z)(r),[e]),oe(r)}(t)},id:"student-".concat(t),name:"student-".concat(t),label:"".concat(n," (").concat(r,")"),checked:null===ae||void 0===ae?void 0:ae.includes(t)},t)}))}),!u&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"border text-grey-500 bg-grey-500 transition-all ease-in-out duration-500 mt-3 "}),(0,k.jsx)("div",{className:"flex flex-col mt-3 overflow-y-auto",children:(0,k.jsx)(b.Z,{containerClasses:"font-600",isSmall:!0,handleCheckboxChange:function(e){he(e.target.checked)},id:"confirm-outcome-shared",name:"Confirm Outcome Shared",label:"Learning Outcome is shared in whatsapp group\ud83d\udea8",checked:ue})})]})]}),(0,k.jsxs)("div",{className:"flex items-center mt-5",children:[(0,k.jsx)("button",{onClick:fe,disabled:$,className:"btn btn-orange font-400",children:$?(0,k.jsx)(j.Z,{classes:"text-white h-5 w-5"}):(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.cta"})}),(0,k.jsx)("button",{className:"ml-4 text-grey-800 focus:outline-none",onClick:function(){n(!1),u&&ce(!1)},children:(0,k.jsx)(i.cC,{id:"trialClass.classroom.endClassModal.cancelBtn"})})]})]})})]})})}},57303:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var s=n(30266),r=n(809),a=n.n(r),o=n(23634),i=n(81292),l=n(92809),c=n(83789),d=n(40259),u=n(15915),h=n(92876),f=n(67294),m=n(62372),x=n(46737),p=n.n(x),g=n(1567),v=n(48140),b=n(77424),j=n(85893),C=(0,f.forwardRef)((function(e,t){var n=e.iconName,s=e.text,r=e.onClick,a=e.isSelected,o=e.disabled,i=e.showBadge;return(0,j.jsxs)("button",{ref:t,type:"button",className:"relative flex flex-col items-center focus:outline-none ".concat(o?"cursor-not-allowed":"cursor-pointer group"),onClick:r,disabled:o,children:[i&&(0,j.jsx)("div",{className:"flex absolute top-0 right-0 justify-center items-center w-5 h-5 rounded-full bg-orange",children:(0,j.jsx)(b.Z,{className:"text-white",size:12})}),(0,j.jsx)("div",{className:"rounded-full h-10 w-10 flex items-center justify-center group-hover:bg-orange group-hover:text-white ".concat(a?"text-white bg-orange":""),children:(0,j.jsx)(v.J,{name:n,size:20,className:a?"text-white":"text-grey group-hover:text-white"})}),(0,j.jsx)("span",{className:"text-sm text-grey group-hover:text-orange",children:s})]})})),w=n(9263),S=n.n(w),y=n(90250);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.isTrial,n=e.studentID,r=e.isGroupClass,i=e.students,x=e.classroomId,v=(0,f.useState)([]),b=v[0],w=v[1],E=(0,f.useState)(null),N=E[0],I=E[1],T=(0,f.useState)(!1),A=T[0],k=T[1],_=(0,f.useState)(!1),M=_[0],Z=_[1],P=(0,f.useMemo)((function(){return d.HS.filter((function(e){return!e.depricated}))}),[]),D=(0,f.useMemo)((function(){return d.zN.filter((function(e){return!e.depricated}))}),[]),R=(0,m.sJ)({isOpen:A,placement:"bottom-end",triggerOffset:13,auto:!0,onOutsideClick:function(){return k(!1)}}),F=R.renderLayer,B=R.triggerProps,H=R.layerProps,L=R.arrowProps,G=function(){var e=(0,s.Z)(a().mark((function e(s){var i,c,d,f,m,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=20;break}return e.prev=1,m=u.RZ.collection(t?"trialBadge":"badges").doc(n.toString()),e.next=5,m.get();case 5:if((g=e.sent).exists&&((null===(i=g.data())||void 0===i||null===(c=i[s.id])||void 0===c?void 0:c.lastUpdatedClassRoom)===x||(null===(d=g.data())||void 0===d?void 0:d.rewardedAt)===x)){e.next=13;break}return e.next=9,m.set(O(O((0,l.Z)({},s.id,{badgeid:s.id,noOfBadges:S().firestore.FieldValue.increment(1),lastUpdatedClassRoom:x}),s),{},{rewardedAt:x}),{merge:!0});case 9:return e.next=11,m.collection("badge").doc(s.id.toString()).set(O(O({},s),{},{rewardedAt:x}));case 11:k(!1),Z(!1);case 13:g.exists&&(null===(f=g.data())||void 0===f?void 0:f.rewardedAt)===x&&p()({icon:"error",title:o.ag._({id:"classroom.badges.tryagain.errormessage",message:"Please provide the next badge after 5 seconds"})}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),p()({icon:"error",title:o.ag._({id:"trialClass.classroom.badges.errorMessage",message:"Unable to send the badge!"})}),(0,h.Tb)(e.t0);case 20:r&&(Z(!0),I(s),k(!1));case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)(j.Fragment,{children:[M&&(0,j.jsxs)("div",{className:"absolute bg-white top-5 p-2 rounded-md w-80",children:[(0,j.jsx)("div",{className:"flex flex-col mt-3",children:null===i||void 0===i?void 0:i.map((function(e){var t=e.name,n=e.id,s=e.phone;return(0,j.jsx)(y.Z,{handleCheckboxChange:function(){return function(e){var t,n=null===b||void 0===b?void 0:b.includes(e),s=(0,c.Z)(b);s=n?null===(t=s)||void 0===t?void 0:t.filter((function(t){return t!=e})):[].concat((0,c.Z)(s),[e]),w(s)}(n)},id:"student-".concat(n),name:"student-".concat(n),label:"".concat(t," (").concat(s,")"),checked:null===b||void 0===b?void 0:b.includes(n)},n)}))}),(0,j.jsx)("div",{className:"flex items-center mt-5",children:(0,j.jsx)("button",{onClick:function(){Z(!1),b.map(function(){var e=(0,s.Z)(a().mark((function e(n){var s,r,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=u.RZ.collection(t?"trialBadge":"badges").doc(n.toString()),e.next=4,i.get();case 4:if((c=e.sent).exists&&(null===(s=c.data())||void 0===s||null===(r=s[N.id])||void 0===r?void 0:r.lastUpdatedClassRoom)===x){e.next=12;break}return e.next=8,i.set(O(O((0,l.Z)({},N.id,{badgeid:N.id,noOfBadges:S().firestore.FieldValue.increment(1),lastUpdatedClassRoom:x}),N),{},{rewardedAt:x}),{merge:!0});case 8:return e.next=10,i.collection("badge").doc(N.id.toString()).set(O(O({},N),{},{rewardedAt:x}));case 10:k(!1),Z(!1);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),p()({icon:"error",title:o.ag._({id:"trialClass.classroom.badges.errorMessage",message:"Unable to send the badge!"})}),(0,h.Tb)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}())},className:"btn btn-orange font-400",children:"Give Badge"})})]}),(0,j.jsx)(C,O(O({isSelected:A,text:o.ag._({id:"trialClass.classroom.badges.control",message:"Give badge"}),iconName:"Award"},B),{},{onClick:function(){return k((function(e){return!e}))}})),A&&F((0,j.jsx)(g.Z,O(O({},H),{},{onClick:G,style:{width:"calc(75% - 2rem)",left:"1rem"},className:"absolute bg-white top-5",badges:t?P:D,enableScroll:!0,children:(0,j.jsx)(m.Eh,O({},L))})))]})},I=n(38198),T=n(59839),A=function(e){var t=e.classroomId,n=e.isTrial,s=e.studentTrackingDetails,r=e.isInstantClass,a=e.students,o=(0,f.useState)(!1),i=o[0],l=o[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("button",{className:"bg-orange text-white px-5 py-2 rounded font-500 hover:bg-orange-500 focus:outline-none",onClick:function(){return l(!0)},children:(0,j.jsx)(I.cC,{id:"trialClass.classroom.navbar.endClassBtn"})}),(0,j.jsx)(T.Z,{students:a,isInstantClass:r,isOpen:i,setIsOpen:l,classroomId:t,isTrial:n,studentTrackingDetails:s})]})},k=n(11031),_=n(11163),M=n(78268),Z=function(e){var t=e.classroomId,n=e.isOpen,s=e.isTrial,r=e.setIsOpen;return(0,j.jsx)(k.Z,{isOpen:n,setIsOpen:r,children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"flex justify-end",children:(0,j.jsx)("button",{className:"focus:outline-none",onClick:function(){return r(!1)},children:(0,j.jsx)(M.Z,{color:"#666",className:"stroke-1"})})}),(0,j.jsx)("div",{className:"mt-5 px-10",children:(0,j.jsx)("h2",{className:"font-600 text-2xl text-grey",children:(0,j.jsx)(I.cC,{id:"trialClass.classroom.leaveClassModal.heading"})})}),(0,j.jsxs)("div",{className:"flex mt-10 px-10 mb-10",children:[(0,j.jsx)("button",{onClick:function(){var e="/feedback/student/".concat(s?"trial-class":"course-class","/").concat(t,"/");_.default.push(e)},className:"btn btn-orange font-400",children:(0,j.jsx)(I.cC,{id:"trialClass.classroom.leaveClassModal.cta"})}),(0,j.jsx)("button",{className:"ml-4 text-grey-800 focus:outline-none",onClick:function(){return r(!1)},children:(0,j.jsx)(I.cC,{id:"trialClass.classroom.leaveClassModal.cancel"})})]})]})})},P=n(58405),D=function(e){var t=e.classroomId,n=e.isTrial,s=(0,f.useState)(!1),r=s[0],a=s[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P.Z,{onClick:function(){return a(!0)},children:(0,j.jsx)(I.cC,{id:"trialClass.classroom.navbar.leaveClassBtn"})}),(0,j.jsx)(Z,{isOpen:r,isTrial:n,setIsOpen:a,classroomId:t})]})},R=n(29501),F=n(36580),B=n(94184),H=n.n(B),L="Sending PTM alert",G="PTM alert sent",U="Send renewal PTM alert";function W(){var e=(0,f.useState)(U),t=e[0],n=e[1],r=(0,f.useState)(!1),o=r[0],l=r[1];function c(){return(c=(0,s.Z)(a().mark((function e(){var t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!1),n(L),e.prev=2,e.next=5,(0,i.CClient)("/api/v1/slack-alerts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({alert_type:"course_class_renewal_alert"})});case 5:if(202!==(t=e.sent).status){e.next=9;break}return n(G),e.abrupt("return");case 9:return e.next=11,t.json();case 11:throw s=e.sent,new Error(s);case 15:e.prev=15,e.t0=e.catch(2),p()({icon:"error",title:"Oops!",text:"Something went wrong while sending the sales alert, please try again."}),(0,h.Tb)(e.t0),n(U);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}var d=[G,L].includes(t);return(0,j.jsxs)("div",{children:[(0,j.jsx)(q,{isModalOpen:o,setIsModalOpen:l,sendRenewalAlert:function(){return c.apply(this,arguments)}}),(0,j.jsxs)("button",{className:H()("text-orange font-600 focus:outline-none",{"cursor-auto":d,"text-green-200":t===G,"text-orange":t!==G}),disabled:d,onClick:function(){return l(!0)},children:[t===L&&(0,j.jsx)(F.Z,{classes:"inline-block w-5 h-5 mr-1 mb-1"}),t===G&&(0,j.jsx)(R.gg,{className:"inline-block w-6 h-6 mb-1"})," ",t]})]})}var q=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,s=e.sendRenewalAlert;return(0,j.jsx)(k.Z,{isOpen:t,setIsOpen:n,shouldCloseOnEsc:!1,isCrossIconShown:!0,width:"max-w-xl",children:(0,j.jsxs)("div",{className:"text-grey leading-tight",children:[(0,j.jsx)("h1",{className:"text-xl mb-4 font-600",children:"Are you sure about sending the Renewal PTM alert to Academic Counselor?"}),(0,j.jsxs)("ul",{className:"ml-0 pl-4 flex-col space-y-2",children:[(0,j.jsx)("li",{children:"There must be less than 6 pending classes in the current course of the student."}),(0,j.jsx)("li",{children:"You should have also informed the Academic Counselor about this Renewal PTM in advance."})]}),(0,j.jsx)("p",{className:"border-l-2 p-2 mb-2 font-500 border-orange-300 flex flex-col space-y-2 bg-orange-200 mt-4",children:"If either of these is not valid, then please do not send the Renewal PTM alert."}),(0,j.jsxs)("div",{className:"text-right mt-8 flex space-x-2",children:[(0,j.jsx)(P.Z,{onClick:s,children:"Yes, Send Renewal PTM alert"}),(0,j.jsx)(P.Z,{variant:"outline",onClick:function(){return n(!1)},children:"No, Cancel"})]})]})})};function J(e){var t=e.sendSalesAlert,n=e.isModalOpen,s=e.setIsModalOpen,r=e.students,a=(0,f.useState)([]),o=a[0],i=a[1];return(0,j.jsx)(k.Z,{isOpen:n,setIsOpen:s,shouldCloseOnEsc:!1,isCrossIconShown:!0,children:(0,j.jsxs)("div",{className:"text-grey",children:[(0,j.jsx)("h1",{className:"text-xl mb-2 font-500 leading-tight",children:"Select students currently present in the class with parents for whom AC alert has to be sent:"}),r.map((function(e){return(0,j.jsx)(y.Z,{handleCheckboxChange:function(){return t=e.id,void i((function(e){return o.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,c.Z)(e),[t])}));var t},id:"student-".concat(e.id),name:"student-".concat(e.id),label:"".concat(e.name," (").concat(e.phone,")"),checked:o.includes(e.id)},e.id)})),(0,j.jsxs)("div",{className:"text-right mt-6",children:[(0,j.jsx)(P.Z,{onClick:function(){s(!1),t(o)},disabled:0==o.length,children:"Send AC alert"}),(0,j.jsx)(P.Z,{variant:"outline",className:"ml-2",onClick:function(){return s(!1)},children:"Close"})]})]})})}var z=function(e){var t=e.sendSalesAlert,n=e.salesAlertState,s=e.students,r=(0,f.useState)(""),a=r[0],i=r[1],l=(0,f.useState)(!1),c=l[0],d=l[1];(0,f.useEffect)((function(){return function(e){switch(e){case"sending":i(o.ag._({id:"trialClass.classroom.salesAlert.label.sendingACalert",message:"Sending AC alert"}));break;case"sent":i(o.ag._({id:"trialClass.classroom.salesAlert.label.ACAlertSent",message:"AC alert sent"}));break;default:i(o.ag._({id:"trialClass.classroom.salesAlert.label.sendACAlert",message:"Send AC alert"}))}}(n)}));var u=["sent","sending"].includes(n);return(0,j.jsxs)(j.Fragment,{children:[c&&(0,j.jsx)(J,{sendSalesAlert:t,isModalOpen:c,setIsModalOpen:d,students:s}),(0,j.jsxs)("button",{className:H()("px-4 py-2 text-md w-full text-left focus:outline-none foucs:ring-0 font-600",{"cursor-auto":u,"text-green-200":"sent"===n,"text-orange hover:bg-orange-100":"sent"!==n}),disabled:u,onClick:function(){return d(!0)},children:["sending"===n&&(0,j.jsx)(F.Z,{classes:"inline-block w-5 h-5 mr-1 mb-1"}),"sent"===n&&(0,j.jsx)(R.gg,{className:"inline-block w-6 h-6 mb-1"})," ",a]})]})},K=n(6463),Y=n(59028),X=n(19889),V=function(e){var t=e.startTime,n=e.classroomId,s=e.isTrial,r=e.isTeacher,a=(0,Y.ZP)(t),i=(0,f.useState)("00:00"),l=i[0],c=i[1],d=(0,f.useState)(!1),u=d[0],h=d[1],m=(0,f.useState)(!1),x=m[0],g=m[1];return(0,f.useEffect)((function(){var e=setInterval((function(){var e=Y.ZP.duration((0,Y.ZP)().diff(a)),t=e.hours(),n=e.minutes()+60*t,s=e.seconds();if(r&&50===n&&0===s)var i=X.Z.info(o.ag._({id:"trialClass.classroom.timer.10minReminder",message:"There are 10 minutes remaining before this class ends!"}),{hideAfter:30,onClick:function(){return i()}}).hide;r&&60===n&&0===s&&p()({icon:"warning",title:o.ag._({id:"trialClass.classroom.timer.classTimeElapsed.hey",message:"Hey!"}),text:o.ag._({id:"trialClass.classroom.timer.classTimeElapsed",message:"The time for this class has elapsed. Please try to wrap it up quickly!"}),closeOnClickOutside:!1,closeOnEsc:!1}),r&&n>=240&&!x&&g(!0),n>=60&&!u&&h(!0),c("".concat(n<=9?"0".concat(n):n,":").concat(s<=9?"0".concat(s):s))}),1e3);return function(){return clearInterval(e)}}),[]),(0,f.useEffect)((function(){x&&p()({icon:"error",title:o.ag._({id:"trialClass.classroom.timer.kick.hey",message:"Hey!"}),text:o.ag._({id:"trialClass.classroom.timer.kick.message",message:"The maximum allotted time for this class has elapsed. You will now be taken to your dashboard"}),closeOnClickOutside:!1,closeOnEsc:!1}).then((function(){if(!n)return _.default.push("/dashboard");var e=r?"teacher":"student",t=s?"trial-class":"course-class",a="/feedback/".concat(e,"/").concat(t,"/").concat(n,"/");return s&&r?_.default.push("/feedback/[userType]/[classType]/[classroomId]/",a):!s&&r?_.default.push("/dashboard/"):void("student"===e&&_.default.push(a))}))}),[x]),(0,j.jsx)("span",{className:"w-12 font-600 tracking-widest ".concat(u?"text-red-200":"text-grey-800"),children:l})},Q=n(31653),$=n(96509),ee=n(50410),te=n(80318),ne="Sending support alert",se="Support alert sent";function re(e){var t=e.sendSupportAlert,n=e.supportAlertState,s=(0,f.useState)(!1),r=s[0],a=s[1],o=[se,ne].includes(n);return(0,j.jsxs)("div",{children:[(0,j.jsx)(ae,{isModalOpen:r,setIsModalOpen:a,sendSupportAlert:t}),(0,j.jsxs)("button",{className:H()("border-t border-grey-600 px-4 py-2 text-md w-full text-left focus:outline-none focus:ring-0 font-600",{"cursor-auto":o,"text-green-200":n===se,"text-orange hover:bg-orange-100":n!==se}),disabled:o,onClick:function(){return a(!0)},children:[n===ne&&(0,j.jsx)(F.Z,{classes:"inline-block w-5 h-5 mr-1 mb-1"}),n===se&&(0,j.jsx)(R.gg,{className:"inline-block w-6 h-6 mb-1"})," ",n]})]})}var ae=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,s=e.sendSupportAlert,r=(0,f.useState)([]),a=r[0],o=r[1];return(0,j.jsx)(k.Z,{isOpen:t,setIsOpen:n,shouldCloseOnEsc:!1,isCrossIconShown:!0,width:"max-w-xl",children:(0,j.jsxs)("div",{className:"text-grey leading-tight space-y-3",children:[(0,j.jsx)("h1",{className:"text-xl mb-2 font-500 leading-tight",children:"Choose appropriate reasons for support alert:"}),(0,j.jsx)("div",{children:Object.entries({grade:"Wrong Grade",internet:"Internet/Network Issue",screenShare:"Trouble with screen sharing",micAndCam:"Trouble with microphone and camera"}).map((function(e){var t=(0,te.Z)(e,2),n=t[0],s=t[1];return(0,j.jsx)(y.Z,{handleCheckboxChange:function(){return e=s,void o((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,c.Z)(t),[e])}));var e},id:"issue-".concat(n),name:"issue-".concat(n),label:s,checked:a.includes(s)},n)}))}),(0,j.jsx)("p",{className:"text-sm text-grey-700 leading-tight",children:"A support agent will attempt to join the class within 5 minutes to assist you. If no one is available to join due to multiple ongoing cases, and you're unable to continue the class, you may end the class."}),(0,j.jsxs)("div",{className:"text-right flex space-x-2",children:[(0,j.jsx)(P.Z,{onClick:function(){return function(e){n(!1),s(e)}(a)},disabled:0==a.length,children:"Send support alert"}),(0,j.jsx)(P.Z,{variant:"outline",onClick:function(){return n(!1)},children:"Cancel"})]})]})})},oe=function(e){var t=e.lesson,n=e.classroomActivies,r=e.startTime,l=e.classroomId,c=e.started,d=e.isTeacher,u=e.isTrial,m=e.studentTrackingDetails,x=e.studentDetails,g=e.activeElement,v=e.setActiveElement,b=e.batchId,w=e.showNewMessageAlert,S=e.isInstantClass,y=void 0!==S&&S,E=e.isGroupClass,O=e.students,I=e.courseTitle,T=(0,f.useState)(!1),k=T[0],_=T[1],M=(0,f.useState)(null),Z=M[0],P=M[1],R=(0,f.useState)(!1),F=R[0],B=R[1],H=(0,f.useState)("Send support alert"),L=H[0],G=H[1],U=function(e){v(g===e?"":e)},q=function(){var e=(0,s.Z)(a().mark((function e(t){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("sending"),e.prev=1,e.next=4,(0,i.CClient)("/api/v1/slack-alerts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({alert_type:"trial_class_sales_alert",extra_data:{attended_student_ids:t}})});case 4:if(202!==(n=e.sent).status){e.next=8;break}return P("sent"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:throw s=e.sent,new Error(s);case 14:e.prev=14,e.t0=e.catch(1),p()({icon:"error",title:o.ag._({id:"trialClass.classroom.salesAlert.errorModal.heading",message:"Oops!"}),text:o.ag._({id:"trialClass.classroom.salesAlert.errorModal.text",message:"Something went wrong while sending the sales alert, please try again."})}),h.uT(e.t0),P(null);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,s.Z)(a().mark((function e(t){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G("Sending support alert"),e.prev=1,e.next=4,(0,i.CClient)("/api/v1/slack-alerts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({alert_type:"trial_class_support_alert",extra_data:{classroom_id:l,issues:t}})});case 4:if(202!==(n=e.sent).status){e.next=8;break}return G("Support alert sent"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:throw s=e.sent,new Error(s);case 14:e.prev=14,e.t0=e.catch(1),p()({icon:"error",title:"Oops!",text:"Something went wrong while sending the support alert, please try again."}),h.Tb(e.t0),G("Send support alert");case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsx)("nav",{className:"flex relative h-16",children:(0,j.jsxs)("div",{className:"flex justify-between items-center px-4 w-full border-b border-grey-500",children:[(0,j.jsx)("div",{className:"py-3 pr-4 border-r border-grey-500",children:(0,j.jsx)(Q.Z,{alt:o.ag._("Codingal"),className:"h-9 w-9"})}),c&&(0,j.jsxs)("div",{className:"flex flex-1 justify-between items-center py-3 ml-5",children:[d&&u?(0,j.jsxs)("div",{className:"md:flex flex-col hidden",children:[(0,j.jsx)("span",{className:"text-grey font-600",children:t}),(0,j.jsx)("span",{className:"text-xs text-gray-400 -mt-1",children:I})]}):(0,j.jsx)("span",{className:"md:flex text-grey font-600 hidden",children:t}),(0,j.jsxs)("div",{className:"flex items-center md:space-x-5",children:[(!E||!d)&&(0,j.jsxs)("div",{className:"hidden md:block",children:[(0,j.jsx)(C,{iconName:"UploadCloud",text:o.ag._({id:"trialClass.classroom.navbar.control.submitProject",message:"Submit project"}),isSelected:k,onClick:function(){return _((function(e){return!e}))}}),(0,j.jsx)(K.Z,{setIsOpen:_,isOpen:k,classroomId:l,batchId:b,classroomActivities:n,studentDetails:x,isTeacher:d})]}),d&&(0,j.jsx)(N,{isTrial:u,studentID:x.studentId,students:O,isGroupClass:E,classroomId:l}),(0,j.jsx)("div",{className:"hidden md:block",children:(0,j.jsx)(C,{iconName:"BookOpen",text:o.ag._({id:"trialClass.classroom.navbar.control.classDetails",message:"Class details"}),isSelected:g===$.pB.CLASS_DETAILS,onClick:function(){return U($.pB.CLASS_DETAILS)}})}),(0,j.jsx)(C,{iconName:"MessageCircle",text:o.ag._({id:"trialClass.classroom.navbar.control.chat",message:"Chat"}),isSelected:g===$.pB.CHAT,onClick:function(){return U($.pB.CHAT)},showBadge:w}),d&&u&&(0,j.jsxs)("div",{className:"relative hidden md:block",children:[(0,j.jsx)(C,{iconName:"Send",text:"Send alert",onClick:function(){return B(!F)},isSelected:F}),F&&(0,j.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white z-10 overflow-hidden",children:[(0,j.jsx)(z,{salesAlertState:Z,sendSalesAlert:q,students:O}),(0,j.jsx)(re,{sendSupportAlert:J,supportAlertState:L})]})]})]}),3391881!==l&&(0,j.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,j.jsx)(V,{startTime:r,classroomId:l,isTrial:u,isTeacher:d}),!d&&(0,j.jsx)("div",{className:"relative",children:(0,j.jsxs)("button",{onClick:function(){return function(){var e,t=null===(e=window.document.getElementsByTagName("iframe"))||void 0===e?void 0:e[0];null===t||void 0===t||t.requestFullscreen()}()},className:"flex items-center space-x-2 text-orange font-600 ml-4",children:[(0,j.jsx)(ee.Z,{size:"15"}),(0,j.jsx)("span",{children:"Go fullscreen"})]})}),d?(0,j.jsxs)(j.Fragment,{children:[!u&&(0,j.jsx)(W,{}),(0,j.jsx)(A,{isInstantClass:y,classroomId:l,isTrial:u,studentTrackingDetails:m,students:O})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(D,{classroomId:l,isTrial:u})})]})]})]})})},ie=f.memo(oe)},90250:function(e,t,n){"use strict";var s=n(85893),r=function(e){var t=e.name,n=e.labelComponent,r=e.label,a=e.helpText,o=e.errorText,i=e.checked,l=e.isRound,c=e.isSmall,d=e.containerClasses,u=e.handleCheckboxChange;return(0,s.jsxs)("div",{className:"pt-2 ".concat(d||""),children:[(0,s.jsxs)("label",{className:"text-grey flex items-center ".concat(c?"text-sm":""),children:[(0,s.jsx)("input",{className:"form-checkbox cursor-pointer flex\n        ".concat(l?"rounded-full":"rounded","\n        ").concat(c?"h-4 w-4":""),type:"checkbox",name:t,checked:i,onChange:u}),r&&(0,s.jsx)("span",{className:"pl-3",children:r}),n&&(0,s.jsx)("div",{className:"pl-3",children:n})]}),a&&(0,s.jsx)("div",{className:"text-grey text-sm font-400 py-2",children:a}),o&&(0,s.jsx)("div",{className:"text-red-200 text-sm font-400 py-2",children:o})]})};r.defaultProps={label:"",helpText:"",errorText:"",checked:!1},t.Z=r},17820:function(e,t,n){"use strict";var s=n(38198),r=n(85893);t.Z=function(e){var t=e.msg;return t?"string"===typeof t?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(s.cC,{id:t.id,values:t.values,comment:t.comment,context:t.context}):null}},48140:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var s=n(92809),r=n(10219),a=n(98938),o=n(85893),i=["name"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function c(e){var t=e.name,n=(0,r.Z)(e,i),c=a[t];return(0,o.jsx)(c,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}},31653:function(e,t,n){"use strict";var s=n(92809),r=n(10219),a=n(81292),o=n(9324),i=n(85893),l=["withText","withTagline","white","whiteText"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={MAIN:"/images/logos/logos-".concat(o.Js,"/logo.svg"),WHITE:"/images/logos/logos-".concat(o.Js,"/logo-white.svg"),MAIN_WITH_TEXT:"/images/logos/logos-".concat(o.Js,"/logo-with-text.svg"),WHITE_WITH_TEXT:"/images/logos/logos-".concat(o.Js,"/white-logo-with-text.svg"),MAIN_WITH_WHITE_TEXT:"/images/logos/logos-".concat(o.Js,"/logo-with-white-text.svg"),MAIN_WITH_TAGLINE:"/images/logos/logos-".concat(o.Js,"/logo-with-tagline.svg")};t.Z=function(e){var t=e.withText,n=e.withTagline,s=e.white,o=e.whiteText,c=(0,r.Z)(e,l),h=u.MAIN;return t&&s?h=u.WHITE_WITH_TEXT:t&&o?h=u.MAIN_WITH_WHITE_TEXT:t?h=u.MAIN_WITH_TEXT:s?h=u.WHITE:n&&(h=u.MAIN_WITH_TAGLINE),(0,i.jsx)("img",d(d({},c),{},{src:(0,a.staticFile)(h)}))}},24546:function(e,t,n){"use strict";var s=n(67294);t.Z=function(){var e=(0,s.useState)({height:void 0,width:void 0}),t=e[0],n=e[1],r=(0,s.useState)({sm:!1,md:!1,lg:!1,xl:!1,"2xl":!1}),a=r[0],o=r[1];return(0,s.useEffect)((function(){var e=function(){n({height:window.innerHeight,width:window.innerWidth});var e=640,t=768,s=1024,r=1280;o({sm:window.innerWidth<=e,md:window.innerWidth>=e&&window.innerWidth<=t,lg:window.innerWidth>=t&&window.innerWidth<=s,xl:window.innerWidth>=s&&window.innerWidth<=r,"2xl":window.innerWidth>=r})};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{dimensions:t,sizes:a,isMobileScreen:t.width<=480}}},86740:function(e,t,n){"use strict";n.d(t,{ts:function(){return s},vM:function(){return r},qv:function(){return a}});var s=["DZ","AO","BJ","BW","BF","BI","CM","CV","CF","TD","KM","CD","DJ","EG","GQ","ER","ET","GA","GM","GH","GN","GW","CI","KE","LS","LR","LY","MG","MW","ML","MR","MU","YT","MA","MZ","NA","NE","NG","CG","RE","RW","SH","ST","SN","SC","SL","SO","ZA","SS","SD","SZ","TZ","TG","TN","UG","EH","ZM","ZW"],r=["BH","KW","OM","QA","SA","AE"],a=["PK","BD","AE","SA","QA","OM","BH","EG","ID","MA","LB","JO","MY","LY","TN","KW"]},15347:function(e,t,n){"use strict";n.d(t,{T0:function(){return s},Yv:function(){return r},wu:function(){return a}});var s={FIRST_CLASS_BOOKED:"First class booked",FIRST_CLASS_COMPLETED:"First class completed",FREE_CLASS_COMPLETED:"Free class completed",COURSE_PURCHASED:"Course purchased"},r={SIGNUP_COMPLETED:"SignupCompleted",FIRST_CLASS_BOOKED:"FirstClassBooked",FIRST_CLASS_COMPLETED:"FirstClassCompleted",FREE_CLASS_COMPLETED:"FreeClassCompleted",COURSE_PURCHASED:"CoursePurchased",NCO_HACKATHON_REGISTRATION_COMPLETED:"NCOHackathonRegistrationCompleted",HPE_CODEBATTLE_REGISTRATION_COMPLETED:"HpeCodeBattleRegistrationCompleted"},a={GAMIFICATION:"Gamification onboarding modal state",DASHBOARD_INTRODUCTION:"Onboarding intro of dashboard state"}},15915:function(e,t,n){"use strict";n.d(t,{RZ:function(){return c},aG:function(){return d}});var s,r=n(81923),a=n.n(r),o=(n(96257),n(14642),(0,n(11752).default)().publicRuntimeConfig),i={apiKey:o.FIREBASE_API_KEY,authDomain:o.FIREBASE_AUTH_DOMAIN,databaseURL:o.FIREBASE_DATABASE_URL,projectId:o.FIREBASE_PROJECT_ID,storageBucket:o.FIREBASE_STORAGE_BUCKET,messagingSenderId:o.FIREBASE_MESSAGING_SENDER_ID,appId:o.FIREBASE_APP_ID},l={apiKey:o.AHAMOMENT_FIREBASE_API_KEY,authDomain:o.AHAMOMENT_FIREBASE_AUTH_DOMAIN,projectId:o.AHAMOMENT_FIREBASE_PROJECT_ID||"projectId",storageBucket:o.AHAMOMENT_FIREBASE_STORAGE_BUCKET,databaseURL:o.AHAMOMENT_FIREBASE_DATABASE_URL,messagingSenderId:o.AHAMOMENT_FIREBASE_MESSAGING_SENDER_ID,appId:o.AHAMOMENT_FIREBASE_APP_ID,measurementId:o.AHAMOMENT_FIREBASE_MEASUREMENT_ID};a().apps.length||(a().initializeApp(l,"ahamomentFirebase"),a().initializeApp(i)),t.ZP=a();var c=a().firestore(),d=(a().database(),null===a()||void 0===a()||null===(s=a().app("ahamomentFirebase"))||void 0===s?void 0:s.firestore())},48482:function(e,t,n){"use strict";n.d(t,{ts:function(){return a},uy:function(){return o}});n(809),n(81292);var s=n(96509),r=n(19889),a=function(e){return e===s.q7.CLASS_FINISHED||e===s.q7.CLASS_FINISHED_ON_ZOOM||e===s.q7.CLASS_FINISHED_ON_GMEET||e===s.q7.CLASS_FINISHED_ON_MOBILE},o=function(e,t,n){var o=!0;return null===e&&(r.Z.error("Please select a valid end reason."),o=!1),a(e)&&0===n.length&&(r.Z.error("Please select at least one student who attended the class."),o=!1),e!==s.q7.CLASS_FINISHED_ON_ZOOM&&e!==s.q7.CLASS_FINISHED_ON_GMEET||t||(r.Z.error("Please explain the reason for switching to Zoom/Gmeet."),o=!1),e!==s.q7.OTHER||t||(r.Z.error("Pleae explain the reason for the issue or choose from one of the listed options."),o=!1),o}},63324:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var s=n(92809),r=n(83789),a=n(30266),o=n(809),i=n.n(o),l=n(38198),c=n(23634),d=n(81292),u=n(57303),h=n(85893),f=function(e){var t=e.url,n=e.name,s=e.people,r=void 0===s?"off":s,a=e.recording,o=void 0===a?"off":a;return(0,h.jsx)("whereby-embed",{style:{height:"100%",width:"100%"},floatSelf:"on",minimal:"off",recording:o,screenshare:"on",leaveButton:"off",people:r,chat:"off",help:"off",lowData:"on",room:t,displayName:n})},m=n(61399),x=n(36580),p=n(24546),g=n(71455),v=n(14184),b=n(40259),j=n(96509),C=n(15347),w=n(43532),S=n(41749),y=n(92876),E=n(91838),O=n(31960),N=n(27484),I=n.n(N),T=n(2962),A=n(5152),k=n(11163),_=n(62286),M=n(67294),Z=n(19889),P=n(78268);function D(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var F=function(e){(function(e){var t,n=D(e);try{for(n.s();!(t=n.n()).done;)return!!t.value.school}catch(s){n.e(s)}finally{n.f()}})(null===e||void 0===e?void 0:e.students)||setTimeout((function(){var e=Z.Z.info((0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("p",{children:"This is a gentle reminder to verify & update the school name of all students present in the class. Please ask the student politely about their school."}),(0,h.jsx)(P.Z,{className:"w-1 text-grey"})]}),{hideAfter:20,onClick:function(){return e()}}).hide}),3e5)},B=n(28854),H=n(86740),L=(0,A.default)((function(){return Promise.all([n.e(2348),n.e(552)]).then(n.bind(n,52348))}),{loadableGenerated:{webpack:function(){return[52348]},modules:["batches/[batchId]/classroom.tsx -> @components/trial-class/system-check-modal"]}}),G=(0,A.default)((function(){return n.e(413).then(n.bind(n,40413))}),{loadableGenerated:{webpack:function(){return[40413]},modules:["batches/[batchId]/classroom.tsx -> @components/classroom/auto-badge-celebration"]}}),U=(0,A.default)((function(){return Promise.all([n.e(9238),n.e(9705),n.e(7767),n.e(3627),n.e(1185)]).then(n.bind(n,30198))}),{loadableGenerated:{webpack:function(){return[30198]},modules:["batches/[batchId]/classroom.tsx -> @components/classroom/class-details"]}}),W=(0,A.default)((function(){return Promise.all([n.e(7491),n.e(9800)]).then(n.bind(n,69800))}),{loadableGenerated:{webpack:function(){return[69800]},modules:["batches/[batchId]/classroom.tsx -> @components/classroom/chat"]}}),q=(0,A.default)((function(){return n.e(6358).then(n.bind(n,86358))}),{loadableGenerated:{webpack:function(){return[86358]},modules:["batches/[batchId]/classroom.tsx -> @components/classroom/preview"]}}),J=function(e){var t,n=e.batchId,o=e.lessonTitle,N=e.classDetails,I=e.meetingUrl,A=e.start,_=e.started,D=e.classroomId,R=(0,M.useContext)(O.B),J=R.name,z=R.id,K=R.teacher,Y=R.student,X=(0,M.useState)(!0),V=X[0],Q=X[1],$=(0,M.useState)(j.pB.CLASS_DETAILS),ee=$[0],te=$[1],ne=(0,M.useState)(!1),se=ne[0],re=ne[1],ae=(0,M.useState)(!1),oe=ae[0],ie=ae[1],le=(0,M.useState)(!1),ce=le[0],de=le[1],ue=(0,M.useState)([]),he=ue[0],fe=ue[1],me=(0,M.useState)(!0),xe=me[0],pe=me[1],ge=(0,p.Z)().sizes,ve=ge.sm,be=ge.md,je=(0,M.useMemo)((function(){return ve||be}),[ve,be]),Ce=(0,g.ZP)(),we=(0,k.useRouter)(),Se=(0,B.Z)().countryCode,ye=H.vM.includes(Se),Ee=function(){var e=(0,a.Z)(i().mark((function e(t){var n,s,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="/api/v1/classrooms/".concat(D,"/logs/"),s={action:t},e.next=5,(0,d.CClient)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),keepalive:!0});case 5:if((r=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,(0,w.getAPIErrorString)(r,n,s);case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:e.next=17;break;case 14:e.prev=14,e.t2=e.catch(0),(0,y.Tb)(e.t2);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(j.sE.USER_LEFT);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=(0,M.useMemo)((function(){if(!N)return null;var e=N.batch.students,t=N.teacher;return[].concat((0,r.Z)(e),[t]).filter((function(e){return e.userId!==z})).map((function(e){return{userId:e.userId,avatar:e.avatar,name:e.name}}))}),[N]),Ie=(0,M.useCallback)((function(){return te("")}),[]);(0,M.useEffect)((function(){if(_)return Ee(j.sE.USER_ENTERED),window.addEventListener("beforeunload",Oe),function(){window.removeEventListener("beforeunload",Oe),Ee(j.sE.USER_LEFT)}}),[]),(0,M.useEffect)((function(){var e="".concat(n,"-tracked");Y&&ce&&_&&null!==_e&&void 0!==_e&&_e.isTrial&&!(0,S.fp)(e)&&(window.fbq&&(window.fbq("trackCustom",C.Yv.FREE_CLASS_COMPLETED,{},{eventID:null===z||void 0===z?void 0:z.toString()}),Ce(g.R2.CONVERSION_FREE_CLASS_COMPLETED)),window.gtag&&window.gtag("event","conversion",(0,s.Z)({},"send_to","".concat(v.u,"/9F-4CJvhyfMCEISk_psC"))),(0,S.pj)(e,"true",(function(){return(0,y.uT)("Not able to set local storage with key: '".concat(e,"'"))})))}),[ce]),(0,M.useEffect)((function(){var e=document.createElement("script");e.src="https://cdn.srv.whereby.com/embed/v1.js",e.type="module",document.head.appendChild(e),e.onload=function(){ie(!0)}}),[]),(0,M.useEffect)((function(){if(Y&&_){var e=setInterval((function(){return Te()}),1e4);return function(){return clearInterval(e)}}}),[]);var Te=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,s,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="/api/v1/classrooms/".concat(N.id,"/"),e.next=4,(0,d.CClient)(t);case 4:if((n=e.sent).ok){e.next=11;break}return e.t0=Error,e.next=9,(0,w.getAPIErrorString)(n,t);case 9:throw e.t1=e.sent,new e.t0(e.t1);case 11:return e.next=13,n.json();case 13:s=e.sent,r=s.classroom,a="/feedback/student/".concat(r.batch.isTrial?"trial-class":"course-class","/").concat(D,"/"),r.endedOn&&we.push(a),e.next=22;break;case 19:e.prev=19,e.t2=e.catch(0),(0,y.Tb)(e.t2);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();if((0,M.useEffect)((function(){ee===j.pB.CHAT&&re(!1)}),[ee,se]),(0,M.useEffect)((function(){_&&De&&(function(e){null===e||void 0===e||e.students.forEach((function(e){(0,d.getIsBirthday)(e.dob,e.timezone)&&setTimeout((function(){var t=Z.Z.info((0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsxs)("p",{children:["Today is ",(0,h.jsx)("span",{className:"font-600",children:e.name}),"' birthday, wish them! \ud83c\udf89"]}),(0,h.jsx)(P.Z,{className:"w-1 text-grey"})]}),{hideAfter:20,onClick:function(){return t()}}).hide}),5e3)}))}(_e),F(_e),function(){var e=Z.Z.warn((0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("p",{children:"This is a reminder to start recording the class. Thank you and have a great class!"}),(0,h.jsx)(P.Z,{className:"w-1 text-grey"})]}),{hideAfter:10,onClick:function(){return e()}}).hide}())}),[_]),(0,M.useEffect)((function(){je&&te("")}),[je]),!_)return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(q,{started:_,start:A,lessonTitle:o,isSystemCheckSuccessful:ce}),(0,h.jsx)(L,{showSystemCheckModal:V,setShowSystemCheckModal:Q,shouldCloseOnEsc:!1,autoClose:!0,classroomId:D,setSystemCheckSuccess:de})]});var Ae,ke,_e=N.batch,Me=N.start,Ze=N.lesson,Pe=N.isInstantClass,De=!!K,Re=_e.students.length>1,Fe=_e.students[0];De&&(ke={phone:Fe.phone,userId:Fe.userId,utmSource:Fe.utmSource},Ae={name:Fe.name,grade:Fe.grade,studentId:Fe.id,avatar:Fe.avatar});var Be=(0,M.useCallback)((function(){pe(!1),Q(!0)}),[]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(T.PB,{title:_e.isTrial?c.ag._({id:"metaTag.title.classroom.trial",message:"Trial class"}):Ze.title}),(0,h.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,h.jsx)(u.Z,{lesson:Ze.title,classroomActivies:Ze.activities,startTime:Me,classroomId:D,started:_,isTeacher:De,isTrial:_e.isTrial,studentTrackingDetails:ke,studentDetails:Ae,activeElement:ee,setActiveElement:te,batchId:n,showNewMessageAlert:se,isInstantClass:Pe,isGroupClass:Re,students:null===_e||void 0===_e?void 0:_e.students,courseTitle:null===_e||void 0===_e||null===(t=_e.course)||void 0===t?void 0:t.title}),(0,h.jsxs)("div",{className:"flex flex-1",children:[(0,h.jsx)("div",{style:{transition:"width 0.5s ease-in-out"},className:"flex flex-col justify-between ".concat(""===ee||je?"w-full":"w-9/12"),children:xe&&V||!oe?(0,h.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1",children:[(0,h.jsx)(x.Z,{classes:"text-orange h-12 w-12"}),(0,h.jsx)("p",{className:"mt-5 text-xl text-orange font-600",children:(0,h.jsx)(l.cC,{id:"trialClass.classroom.whereByPlaceholder.heading"})}),(0,h.jsx)("p",{className:"max-w-xl text-center text-orange",children:(0,h.jsx)(l.cC,{id:"trialClass.classroom.whereByPlaceholder.message",values:{0:E.nG.label}})})]}):(0,h.jsx)(f,{url:"".concat(I).concat(De?"&roomIntegrations=on&breakout=on":"?roomIntegrations=on&breakout=on").concat(ye?"&alternate-url":""),name:J,people:De?"on":"off",recording:De?"on":"off"})}),(0,h.jsxs)("div",{style:{transition:"width 0.5s ease-in-out, opacity ".concat(""===ee?"0s":"1.5s"," ease-in-out, height 0.5s ease-in-out"),height:"calc(100vh - 4rem)"},className:"flex border-l border-grey-300 absolute md:relative ".concat(""!==ee?"w-full bg-white md:w-1/3 opacity-100 visible":"w-0 opacity-0 invisible hidden md:flex"),children:[(0,h.jsx)("div",{className:"".concat(ee===j.pB.CHAT?"flex":"hidden"," w-full"),children:(0,h.jsx)(W,{batchId:n,userId:String(z),localUserName:J,remoteUsers:Ne,close:Ie,setShowNewMessageAlert:re})}),ee===j.pB.CLASS_DETAILS&&(0,h.jsx)("div",{className:"flex w-full",children:(0,h.jsx)(U,{lesson:Ze,isTeacher:De,close:Ie,systemCheckErrors:he,onRunSystemCheck:Be,classroomId:D,batchInfo:_e,studentID:null===Y||void 0===Y?void 0:Y.id})})]})]})]}),!De&&(0,h.jsx)(G,{studentID:Y.id,isTrial:null===_e||void 0===_e?void 0:_e.isTrial,classroomId:D}),De&&(null===_e||void 0===_e?void 0:_e.students.map((function(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(G,{studentID:e.id,classroomId:D,isTrial:null===_e||void 0===_e?void 0:_e.isTrial})})}))),(null===_e||void 0===_e?void 0:_e.isTrial)&&(0,h.jsx)(m.t6,{images:b.HS.filter((function(e){return!e.depricated})).map((function(e){return{url:e.celebrationGif,height:400,width:400}})),timeout:3e5}),(0,h.jsx)(L,{showSystemCheckModal:V,setShowSystemCheckModal:Q,shouldCloseOnEsc:!1,autoClose:xe,classroomId:D,setSystemCheckSuccess:de,setSystemCheckErrors:fe})]})};J.getInitialProps=function(){var e=(0,a.Z)(i().mark((function e(t){var n,s,r,a,o,l,c,u,h,f,m,x,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.query,s=n.batchId,r=(0,_.parseCookies)(t).token){e.next=5;break}return e.abrupt("return",{});case 5:return a={headers:{Authorization:"Token ".concat(r)}},e.next=8,(0,d.CClient)("/api/v1/classrooms/?batch_id=".concat(s,"&state=Ongoing,Upcoming&order_by=Start&is_cancelled=false&limit=1&with_assignments=true"),a);case 8:if((o=e.sent).ok){e.next=12;break}return(0,w.redirectToForGetInitialProps)(t,"/".concat(o.status)),e.abrupt("return",{});case 12:return e.next=14,o.json();case 14:if(0!==(l=e.sent).length){e.next=18;break}return(0,w.redirectToForGetInitialProps)(t,"/dashboard"),e.abrupt("return",{});case 18:if(c=l[0],u=c.id,h=c.start,f=c.lesson,!I()(h).isAfter(I()())){e.next=23;break}return e.abrupt("return",{batchId:s,start:h,started:!1,lessonTitle:f.title,classroomId:u});case 23:return e.next=25,(0,d.CClient)("/api/v1/classrooms/".concat(u,"/whereby/"),a);case 25:if((m=e.sent).ok){e.next=29;break}return(0,w.redirectToForGetInitialProps)(t,"/".concat(m.status)),e.abrupt("return",{});case 29:return e.next=31,m.json();case 31:return x=e.sent,p=x.meetingUrl,e.abrupt("return",{started:!0,batchId:s,classDetails:c,meetingUrl:p,classroomId:u});case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var z=J},52419:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/batches/[batchId]/classroom",function(){return n(63324)}])}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[296,6883,3775,9239,1790,1795,7294,185,8938,2372,3238,9260,3546,467,9356,9501,1455,482,2022,259,5215,9774,2888,179],(function(){return t(78846),t(52419)}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=classroom-8db96a1f5d74852266a4.js.map